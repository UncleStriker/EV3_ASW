<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Biblioteca Tercer Ojo</title>
    <!-- Bootstrap CSS -->
    <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
  />
    <style>
      body {
        background-color: #000;
        color: #fff;
      }
      .jumbotron {
        background-color: #d4af37;
        color: #000;
      }
      .fibonacci-container {
        display: flex;
        flex-wrap: wrap;
      }
      .fibonacci-container > div {
        flex-grow: 1;
        margin: 10px;
      }
      .btn-custom {
        background-color: #020301;
        border-color: #4b4c0e;
        color: white;
      }
      .btn-custom:hover {
        background-color: #020301;
        border-color: #4b4c0e;
        color: rgb(142, 139, 139);
      }
      .table.table {
        background-color: #d4af37;
        font-family: Georgia, 'Times New Roman', Times, serif;
        font-size: large;
        color: #000;
      }
      h1.display-4{
        font-family: 'Times New Roman', Times, serif;
        font-size: 400%;
      }
      p.lead{
        font-family: 'Times New Roman', Times, serif;
        font-size: 200%;
      }
      a.nav-link {
        color: #000;
        background-color: #4b4c0e;
        font-size: x-large;
      }
      button.nav-item {
        background-color: #4b4c0e;
      }
      div.container {
        font-size: larger;
      }
      
    </style>
    <script>
      window.onload = () => {
        allLibros(0);
      };

      const allLibros = (tipo) => {
        fetch(
          `http://localhost/PHP/EV3_ASW/TercerOjo/db/listar_libros.php?tipo=${tipo}`
        )
          .then((response) => response.json())
          .then((data) => {
            const table = document.createElement("table");
            table.classList.add("table");
            const tr = document.createElement("tr");
            let td = document.createElement("td");
            td.innerText = "ID";
            tr.appendChild(td);
            td = document.createElement("td");
            td.innerText = "TITULO";
            tr.appendChild(td);
            td = document.createElement("td");
            td.innerText = "AUTOR";
            tr.appendChild(td);
            td = document.createElement("td");
            td.innerText = "ACCION";
            tr.appendChild(td);
            table.appendChild(tr);

            data.data.forEach((element) => {
              const tr = document.createElement("tr");
              let td = document.createElement("td");
              td.innerText = element[0];
              tr.appendChild(td);
              td = document.createElement("td");
              td.innerText = element[1];
              tr.appendChild(td);
              td = document.createElement("td");
              td.innerText = element[2];
              tr.appendChild(td);
              td = document.createElement("td");
              td.innerHTML = `<button onclick="deleteLibro(${element[0]}, ${tipo})">BORRAR</button>`;
              tr.appendChild(td);
              table.appendChild(tr);
            });

            document.getElementById("app").innerHTML = "";
            document.getElementById("app").appendChild(table);
          });
      };

      const newLibro = () => {
        const titulo = document.getElementById("titulo").value;
        const autor = document.getElementById("autor").value;
        const editorial = document.getElementById("editorial").value;
        const fecha_publicacion =
          document.getElementById("fecha_publicacion").value;

        fetch(
          `http://localhost/PHP/EV3_ASW/TercerOjo/db/agregar_libro.php?&titulo=${titulo}&autor=${autor}&editorial=${editorial}&fecha_publicacion=${fecha_publicacion}`
        )
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            allLibros(tipo);
            document.getElementById("titulo").value = "";
          });
      };

      const deleteLibro = (id) => {
        fetch(
          `http://localhost/PHP/EV3_ASW/TercerOjo/db/eliminar_libro.php?id=${id}`
        )
          .then((response) => response.text())
          .then((data) => {
            console.log(data);
            allLibros(tipo);
          });
      };
    </script>
  </head>
  <body>

    <div class="jumbotron text-center">
      <h1 class="display-4">¡Bienvenidos a la Biblioteca Tercer Ojo!</h1>
      <p class="lead">Una muy cordial bienvenida para todos nuestros lectores en la inauguración de nuestra página oficial "Biblioteca Tercer Ojo" donde encontrarás libros de ciencia ficción y fantasía</p>
    </div>

    <div class="container fibonacci-container">
      <div class="fibonacci-col-1">
        <h2>Top 3 en venta en libros de Ciencia Ficción</h2>
        <div class="row">
          <div class="col-md-4">
            <div class="card">
              <img
                src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fs3-ap-southeast-2.amazonaws.com%2Fassets.allenandunwin.com%2Fimages%2Foriginal%2F9781786892720.jpg&f=1&nofb=1&ipt=558e612841e1cdd305e7378c9b8a787b619029ed0e3b98f290a266a9e1414d08&ipo=images"
                class="card-img-top"
                alt="The midnight Library"
              />
              <div class="card-body">
                <h5 class="card-title">The midnight Library</h5>
                <p class="card-text">Descripción del libro 1.</p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card">
              <img
                src="https://images.macmillan.com/folio-assets/macmillan_us_frontbookcovers_1000H/9781250217325.jpg"
                class="card-img-top"
                alt="The house of the gelurean sea"
              />
              <div class="card-body">
                <h5 class="card-title">The house of the gelurean sea</h5>
                <p class="card-text">Descripción del libro 2.</p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card">
              <img
                src="https://www.goresetgo.it/wp-content/uploads/2022/08/the-atlas-six-copertina.jpg"
                class="card-img-top"
                alt="The atlas six"
              />
              <div class="card-body">
                <h5 class="card-title">The atlas six</h5>
                <p class="card-text">Descripción del libro 3.</p>
              </div>
            </div>
          </div>
        </div>
        <br>
        <div class="text-right">
          <button class="nav-item">
            <a class="nav-link" href="#" onclick="allLibros(0)"
              >Mostrar ciencia ficción</a
            >
          </button>
       </div>
       <br>

      <div class="fibonacci-col-2">
        <h2>Top 3 en ventas de libros de Fantasía</h2>
        <div class="row">
          <div class="col-md-4">
            <div class="card">
              <img
                src="https://i.weltbild.de/p/elantris-254982561.jpg?v=31&wp=_ads-minzoom2"
                class="card-img-top"
                alt="Elantris"
              />
              <div class="card-body">
                <h5 class="card-title">Elantris</h5>
                <p class="card-text">Descripción del libro 4.</p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card">
              <img
                src="https://i.pinimg.com/736x/b3/54/dc/b354dce601b2a139a72e752615d29613.jpg"
                class="card-img-top"
                alt="El archivo de las tormentas"
              />
              <div class="card-body">
                <h5 class="card-title">El archivo de las tormentas</h5>
                <p class="card-text">Descripción del libro 5.</p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card">
              <img
                src="https://2.bp.blogspot.com/-i4ql5KR1B40/ThXrCMGKEYI/AAAAAAAAAB4/1AaizJIn1S8/s1600/el-nombre-del-viento2-jpg.jpg"
                class="card-img-top"
                alt="El nombre del viento"
              />
              <div class="card-body">
                <h5 class="card-title">El nombre del viento</h5>
                <p class="card-text">Descripción del libro 6.</p>
              </div>
            </div>
          </div>
        </div>
        <br>
        <div class="text-right">
          <button class="nav-item">
            <a class="nav-link" href="#" onclick="allLibros(1)"
              >Mostrar Fantasía</a
            >
          </button>
        </div>
        <br>
      </div>
    </div>

    <div class="container">
      <!-- INGRESO DE LIBROS -->
      <form method="POST" class="form-inline" action="../db/agregar_libro.php">
        <div class="mb-3">
          <label for="titulo" class="form-label">Titulo</label>
          <input
            type="text"
            class="form-control"
            id="titulo"
            placeholder="Nombre del libro"
            name="titulo"
          />
        </div>
        <div class="mb-3">
          <label for="autor" class="form-label">Autor</label>
          <input
            type="text"
            class="form-control"
            id="autor"
            placeholder="Nombre del autor"
            name="autor"
          />
        </div>
        <div class="mb-3">
          <label for="editorial" class="form-label">Editorial</label>
          <input
            type="text"
            class="form-control"
            id="editorial"
            placeholder="Nombre de la editorial"
            name="editorial"
          />
        </div>
        <div class="mb-3">
          <label for="fecha_publicacion">Fecha de publicación</label>
          <input type="text" id="fecha_publicacion" name="fecha_publicacion" />
        </div>
        <br><br>
        <button class="submit" onclick="newLibro()">Agregar Libro</button>
        <br><br>  
      </form>
      <br>
      <br>
      <div>
        <h1 for="titulo">Listado de libros</h1>
      </div>
      <br>
      <div class="content" id="app"></div>
    </div>

    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
